$(document).ready(function () {
    var selectedModifierGroupsEdit = [];
    console.log("inside ModifierGroupId Edit List");

    $(".modifier-group").each(function () {
        var groupId = $(this).data("groupid");
        var itemId = $(this).data("itemid");

        console.log(itemId, groupId);

        $.ajax({
            url: '@Url.Action("GetModifiersGroupByItem", "Menu")',
            type: 'GET',
            dataType: 'json',
            data: { groupId: groupId, itemId: itemId },
            success: function (modifiers) {
                console.log("Fetched Modifiers for Group:", groupId, modifiers);

                modifiers.itemModifierGroups.forEach(modifier => {
                    // **Check if the modifier is already in the array**
                    let exists = selectedModifierGroupsEdit.some(existingModifier =>
                        existingModifier.itemId === modifier.itemId &&
                        existingModifier.modifierGroupId === modifier.modifierGroupId
                    );

                    if (!exists) { // **Only push if it doesn't exist**
                        selectedModifierGroupsEdit.push(modifier);
                    }
                });

                console.log("Updated Modifier Groups:", selectedModifierGroupsEdit);
            },
            error: function (xhr, status, error) {
                console.error('Error loading modifiers:', xhr.responseText);
            }
        });
    });
});
